<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Redis Internal: List Types | Kassian Sun</title>
<meta name=keywords content><meta name=description content="The Generic List Implementation

Code Path: src/t_list.c

It&rsquo;s a Redis command wrapper of listpack and quicklist.
Listpack Implementation
The same implementation of hash type.
Quicklist Implementation

Code Path: src/quicklist.c

If the size of the list exceeds a certain number, Redis will try to convert a listpack to quicklist.
A quicklist is a double-linked list of listpack:

If the data is too large, it will store the data as a &ldquo;plain&rdquo; node, without encoding it as listpack.
If the data size exceeds the size limit of listpack, it will create a new list node to store it.

If it&rsquo;s in the middle of the node, the node will split into two nodes.


If the list node is empty (after deletion), it will get removed from the list.
The list node can be compressed, but not the head or the tail.
The pop operation is a combination of get & delete.
"><meta name=author content><link rel=canonical href=https://blog.kassiansun.com/posts/redis-list/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.kassiansun.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://blog.kassiansun.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://blog.kassiansun.com/favicon-32x32.png><link rel=apple-touch-icon href=https://blog.kassiansun.com/apple-touch-icon.png><link rel=mask-icon href=https://blog.kassiansun.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://blog.kassiansun.com/posts/redis-list/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-0NC5Q6H2ZC"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-0NC5Q6H2ZC")}</script><meta property="og:url" content="https://blog.kassiansun.com/posts/redis-list/"><meta property="og:site_name" content="Kassian Sun"><meta property="og:title" content="Redis Internal: List Types"><meta property="og:description" content="The Generic List Implementation Code Path: src/t_list.c It’s a Redis command wrapper of listpack and quicklist.
Listpack Implementation The same implementation of hash type.
Quicklist Implementation Code Path: src/quicklist.c If the size of the list exceeds a certain number, Redis will try to convert a listpack to quicklist. A quicklist is a double-linked list of listpack:
If the data is too large, it will store the data as a “plain” node, without encoding it as listpack. If the data size exceeds the size limit of listpack, it will create a new list node to store it. If it’s in the middle of the node, the node will split into two nodes. If the list node is empty (after deletion), it will get removed from the list. The list node can be compressed, but not the head or the tail. The pop operation is a combination of get & delete. "><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-03T11:55:05+08:00"><meta property="article:modified_time" content="2023-01-03T11:55:05+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Redis Internal: List Types"><meta name=twitter:description content="The Generic List Implementation

Code Path: src/t_list.c

It&rsquo;s a Redis command wrapper of listpack and quicklist.
Listpack Implementation
The same implementation of hash type.
Quicklist Implementation

Code Path: src/quicklist.c

If the size of the list exceeds a certain number, Redis will try to convert a listpack to quicklist.
A quicklist is a double-linked list of listpack:

If the data is too large, it will store the data as a &ldquo;plain&rdquo; node, without encoding it as listpack.
If the data size exceeds the size limit of listpack, it will create a new list node to store it.

If it&rsquo;s in the middle of the node, the node will split into two nodes.


If the list node is empty (after deletion), it will get removed from the list.
The list node can be compressed, but not the head or the tail.
The pop operation is a combination of get & delete.
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.kassiansun.com/posts/"},{"@type":"ListItem","position":2,"name":"Redis Internal: List Types","item":"https://blog.kassiansun.com/posts/redis-list/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Redis Internal: List Types","name":"Redis Internal: List Types","description":"The Generic List Implementation Code Path: src/t_list.c It\u0026rsquo;s a Redis command wrapper of listpack and quicklist.\nListpack Implementation The same implementation of hash type.\nQuicklist Implementation Code Path: src/quicklist.c If the size of the list exceeds a certain number, Redis will try to convert a listpack to quicklist. A quicklist is a double-linked list of listpack:\nIf the data is too large, it will store the data as a \u0026ldquo;plain\u0026rdquo; node, without encoding it as listpack. If the data size exceeds the size limit of listpack, it will create a new list node to store it. If it\u0026rsquo;s in the middle of the node, the node will split into two nodes. If the list node is empty (after deletion), it will get removed from the list. The list node can be compressed, but not the head or the tail. The pop operation is a combination of get \u0026amp; delete. ","keywords":[],"articleBody":"The Generic List Implementation Code Path: src/t_list.c It’s a Redis command wrapper of listpack and quicklist.\nListpack Implementation The same implementation of hash type.\nQuicklist Implementation Code Path: src/quicklist.c If the size of the list exceeds a certain number, Redis will try to convert a listpack to quicklist. A quicklist is a double-linked list of listpack:\nIf the data is too large, it will store the data as a “plain” node, without encoding it as listpack. If the data size exceeds the size limit of listpack, it will create a new list node to store it. If it’s in the middle of the node, the node will split into two nodes. If the list node is empty (after deletion), it will get removed from the list. The list node can be compressed, but not the head or the tail. The pop operation is a combination of get \u0026 delete. ","wordCount":"149","inLanguage":"en","datePublished":"2023-01-03T11:55:05+08:00","dateModified":"2023-01-03T11:55:05+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.kassiansun.com/posts/redis-list/"},"publisher":{"@type":"Organization","name":"Kassian Sun","logo":{"@type":"ImageObject","url":"https://blog.kassiansun.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.kassiansun.com/ accesskey=h title="Kassian Sun (Alt + H)">Kassian Sun</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.kassiansun.com/about title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Redis Internal: List Types</h1><div class=post-meta><span title='2023-01-03 11:55:05 +0800 +0800'>January 3, 2023</span></div></header><div class=post-content><h2 id=the-generic-list-implementation>The Generic List Implementation<a hidden class=anchor aria-hidden=true href=#the-generic-list-implementation>#</a></h2><ul><li>Code Path: <code>src/t_list.c</code></li></ul><p>It&rsquo;s a Redis command wrapper of <code>listpack</code> and <code>quicklist</code>.</p><h2 id=listpack-implementation>Listpack Implementation<a hidden class=anchor aria-hidden=true href=#listpack-implementation>#</a></h2><p>The same implementation of <a href=/posts/redis-hash/>hash type</a>.</p><h2 id=quicklist-implementation>Quicklist Implementation<a hidden class=anchor aria-hidden=true href=#quicklist-implementation>#</a></h2><ul><li>Code Path: <code>src/quicklist.c</code></li></ul><p>If the size of the list exceeds a certain number, Redis will try to convert a <code>listpack</code> to <code>quicklist</code>.
A <code>quicklist</code> is a double-linked list of <code>listpack</code>:</p><ul><li>If the data is too large, it will store the data as a &ldquo;plain&rdquo; node, without encoding it as <code>listpack</code>.</li><li>If the data size exceeds the size limit of <code>listpack</code>, it will create a new list node to store it.<ul><li>If it&rsquo;s in the middle of the node, the node will split into two nodes.</li></ul></li><li>If the list node is empty (after deletion), it will get removed from the list.</li><li>The list node can be compressed, but not the head or the tail.</li><li>The pop operation is a combination of get & delete.</li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://blog.kassiansun.com/>Kassian Sun</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>